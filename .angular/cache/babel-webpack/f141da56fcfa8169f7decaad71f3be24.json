{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\niels\\\\source\\\\repos\\\\ng-certification\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\classCallCheck.js\";\nimport _createClass from \"C:\\\\Users\\\\niels\\\\source\\\\repos\\\\ng-certification\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createClass.js\";\nimport { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nexport var StorageService = /*#__PURE__*/(function () {\n  var StorageService = /*#__PURE__*/function () {\n    function StorageService() {\n      _classCallCheck(this, StorageService);\n\n      this.zipcodes = new BehaviorSubject(JSON.parse(existingStorage));\n      this.zipcodes$ = this.zipcodes.asObservable();\n    }\n\n    _createClass(StorageService, [{\n      key: \"storeZipcode\",\n      value: function storeZipcode(zipcode) {\n        var existingStorage = localStorage.getItem('zipcodes');\n\n        if (existingStorage == null) {\n          localStorage.setItem('zipcodes', JSON.stringify([zipcode]));\n          return;\n        }\n\n        try {\n          var existingZipcodes = JSON.parse(existingStorage); //console.info(`existing zipcodes ${existingZipcodes}`);\n\n          if (typeof existingZipcodes == typeof []) {\n            existingZipcodes.push(zipcode); //console.info(existingZipcodes);\n\n            localStorage.setItem('zipcodes', JSON.stringify(existingZipcodes));\n            var existingStorage = localStorage.getItem('zipcodes');\n\n            if (existingStorage == null) {\n              throw new Error(\"No zipcodes\");\n            }\n\n            this.zipcodes.next(JSON.parse(existingStorage));\n            console.info(existingStorage);\n          }\n        } catch (e) {\n          console.error(\"Failed to save zipcode: \".concat(e));\n        }\n      }\n    }]);\n\n    return StorageService;\n  }();\n\n  StorageService.ɵfac = function StorageService_Factory(t) {\n    return new (t || StorageService)();\n  };\n\n  StorageService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: StorageService,\n    factory: StorageService.ɵfac,\n    providedIn: 'root'\n  });\n  return StorageService;\n})();","map":null,"metadata":{},"sourceType":"module"}