{"ast":null,"code":"var _class;\nimport { HttpParams } from '@angular/common/http';\nimport { map } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class WeatherService {\n  constructor(httpClient) {\n    this.httpClient = httpClient;\n    this.appId = `5a4b2d457ecbef9eb2a71e480b947604`;\n    this.weatherEndpoint = `http://api.openweathermap.org/data/2.5/weather`; //?zip=95742,US&appid=5a4b2d457ecbef9eb2a71e480b947604`;\n    this.forecastEndpoint = `https://api.openweathermap.org/data/2.5/forecast`; //https://api.openweathermap.org/data/2.5/forecast?zip=20500&appid=5a4b2d457ecbef9eb2a71e480b947604\n    this.iconEndpoint = \"https://www.angulartraining.com/images/weather\";\n  }\n  getWeatherReport(zipcode) {\n    //console.info(`getWeatherReport for ${zipcode}`);\n    return this.httpClient.get(this.weatherEndpoint, {\n      params: new HttpParams().set('zip', `${zipcode},US`).set('appid', this.appId)\n    }).pipe(map(response => {\n      //console.info(response);\n      return response;\n    }));\n  }\n  getForecast(zipcode) {\n    return this.httpClient.get(this.forecastEndpoint, {\n      params: new HttpParams().set('zip', `${zipcode},US`).set('appid', this.appId)\n    }).pipe(map(response => {\n      //console.info(response);\n      return response;\n    }));\n  }\n  getIcon(description) {\n    switch (description) {\n      case 'clouds':\n      case 'fog':\n      case 'overcast clouds':\n      case 'scattered clouds':\n        return `${this.iconEndpoint}/clouds.png`;\n      case 'rain':\n        return `${this.iconEndpoint}/rain.png`;\n        break;\n      case 'snow':\n        return `${this.iconEndpoint}/snow.png`;\n      case 'clear sky':\n      case 'sun':\n        return `${this.iconEndpoint}/sun.png`;\n      default:\n        return 'unknown';\n    }\n  }\n}\n_class = WeatherService;\n_class.ɵfac = function WeatherService_Factory(t) {\n  return new (t || _class)(i0.ɵɵinject(i1.HttpClient));\n};\n_class.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: _class,\n  factory: _class.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"names":["HttpParams","map","WeatherService","constructor","httpClient","appId","weatherEndpoint","forecastEndpoint","iconEndpoint","getWeatherReport","zipcode","get","params","set","pipe","response","getForecast","getIcon","description","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sources":["C:\\Users\\niels\\source\\repos\\ng-certification\\src\\app\\weather.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient, HttpParams } from '@angular/common/http'\nimport { Observable, map } from 'rxjs';\nimport { Weather } from './weatherinfo.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class WeatherService {\n\n  constructor(private httpClient: HttpClient) { }\n  appId = `5a4b2d457ecbef9eb2a71e480b947604`;\n\n  weatherEndpoint = `http://api.openweathermap.org/data/2.5/weather`; //?zip=95742,US&appid=5a4b2d457ecbef9eb2a71e480b947604`;\n  forecastEndpoint = `https://api.openweathermap.org/data/2.5/forecast`; //https://api.openweathermap.org/data/2.5/forecast?zip=20500&appid=5a4b2d457ecbef9eb2a71e480b947604\n  iconEndpoint = \"https://www.angulartraining.com/images/weather\";\n\n  getWeatherReport(zipcode: string): Observable<Weather>\n  {\n   //console.info(`getWeatherReport for ${zipcode}`);\n    return this.httpClient\n      .get(this.weatherEndpoint,\n        {\n          params: new HttpParams()\n            .set('zip', `${zipcode},US`)\n            .set('appid', this.appId)\n        }).pipe(\n          map((response) => {\n            //console.info(response);\n            return response as Weather;\n          }));\n  }\n\n  getForecast(zipcode: string): Observable<Weather[]> {\n    return this.httpClient\n      .get(this.forecastEndpoint,\n        {\n          params: new HttpParams()\n          .set('zip', `${zipcode},US`)\n          .set('appid', this.appId)\n      }).pipe(\n        map((response) => {\n          //console.info(response);\n          return response as Weather[];\n        }));\n  }\n\n  getIcon(description: string)\n  {\n    switch (description)\n      {\n        case 'clouds':\n        case 'fog':\n        case 'overcast clouds':\n        case 'scattered clouds':\n          return `${this.iconEndpoint}/clouds.png`;\n        case 'rain':\n          return `${this.iconEndpoint}/rain.png`;\n          break;\n        case 'snow':\n          return `${this.iconEndpoint}/snow.png`;\n        case 'clear sky':\n        case 'sun':\n          return `${this.iconEndpoint}/sun.png`;\n        default:\n          return 'unknown';\n      }\n  }\n}\n"],"mappings":";AACA,SAAqBA,UAAU,QAAQ,sBAAsB;AAC7D,SAAqBC,GAAG,QAAQ,MAAM;;;AAMtC,OAAM,MAAOC,cAAc;EAEzBC,YAAoBC,UAAsB;IAAtB,KAAAA,UAAU,GAAVA,UAAU;IAC9B,KAAAC,KAAK,GAAG,kCAAkC;IAE1C,KAAAC,eAAe,GAAG,gDAAgD,CAAC,CAAC;IACpE,KAAAC,gBAAgB,GAAG,kDAAkD,CAAC,CAAC;IACvE,KAAAC,YAAY,GAAG,gDAAgD;EALjB;EAO9CC,gBAAgBA,CAACC,OAAe;IAE/B;IACC,OAAO,IAAI,CAACN,UAAU,CACnBO,GAAG,CAAC,IAAI,CAACL,eAAe,EACvB;MACEM,MAAM,EAAE,IAAIZ,UAAU,EAAE,CACrBa,GAAG,CAAC,KAAK,EAAE,GAAGH,OAAO,KAAK,CAAC,CAC3BG,GAAG,CAAC,OAAO,EAAE,IAAI,CAACR,KAAK;KAC3B,CAAC,CAACS,IAAI,CACLb,GAAG,CAAEc,QAAQ,IAAI;MACf;MACA,OAAOA,QAAmB;IAC5B,CAAC,CAAC,CAAC;EACX;EAEAC,WAAWA,CAACN,OAAe;IACzB,OAAO,IAAI,CAACN,UAAU,CACnBO,GAAG,CAAC,IAAI,CAACJ,gBAAgB,EACxB;MACEK,MAAM,EAAE,IAAIZ,UAAU,EAAE,CACvBa,GAAG,CAAC,KAAK,EAAE,GAAGH,OAAO,KAAK,CAAC,CAC3BG,GAAG,CAAC,OAAO,EAAE,IAAI,CAACR,KAAK;KAC3B,CAAC,CAACS,IAAI,CACLb,GAAG,CAAEc,QAAQ,IAAI;MACf;MACA,OAAOA,QAAqB;IAC9B,CAAC,CAAC,CAAC;EACT;EAEAE,OAAOA,CAACC,WAAmB;IAEzB,QAAQA,WAAW;MAEf,KAAK,QAAQ;MACb,KAAK,KAAK;MACV,KAAK,iBAAiB;MACtB,KAAK,kBAAkB;QACrB,OAAO,GAAG,IAAI,CAACV,YAAY,aAAa;MAC1C,KAAK,MAAM;QACT,OAAO,GAAG,IAAI,CAACA,YAAY,WAAW;QACtC;MACF,KAAK,MAAM;QACT,OAAO,GAAG,IAAI,CAACA,YAAY,WAAW;MACxC,KAAK,WAAW;MAChB,KAAK,KAAK;QACR,OAAO,GAAG,IAAI,CAACA,YAAY,UAAU;MACvC;QACE,OAAO,SAAS;;EAExB;;SA3DWN,cAAc;;mBAAdA,MAAc,EAAAiB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;AAAA;;SAAdpB,MAAc;EAAAqB,OAAA,EAAdrB,MAAc,CAAAsB,IAAA;EAAAC,UAAA,EAFb;AAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}